# 系统使用手册

## 目录

1. [系统简介](#系统简介)
2. [快速开始](#快速开始)
3. [功能模块](#功能模块)
4. [常见问题](#常见问题)

---

## 系统简介

### 系统概述

本系统是一个基于 Spring Boot + Vue 3 的企业级权限管理系统，提供完整的用户、角色、权限、部门管理功能，支持数据权限控制、操作日志记录、系统监控等功能。

### 技术架构

**后端技术栈：**
- Spring Boot 2.7.x
- Spring Security
- MyBatis Plus
- Redis
- JWT
- MySQL 8.0

**前端技术栈：**
- Vue 3
- Vite
- Element Plus
- Pinia
- Vue Router
- Axios

### 系统特点

- 🔐 完善的权限管理体系（RBAC模型）
- 📊 灵活的数据权限控制
- 📝 详细的操作日志记录
- 🔔 实时通知公告功能
- 📈 系统监控与缓存管理
- 🎨 美观的UI界面
- 📱 响应式设计

---

## 快速开始

### 环境要求

- JDK 1.8+
- Node.js 16+
- MySQL 8.0+
- Redis 5.0+
- Maven 3.6+

### 安装步骤

#### 1. 数据库初始化

```sql
-- 创建数据库
CREATE DATABASE base_system DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 导入数据库脚本
-- 执行 backend/src/main/resources/db/schema.sql
-- 执行 backend/src/main/resources/db/data.sql
```

#### 2. 后端启动

```bash
# 进入后端目录
cd backend

# 修改配置文件
# 编辑 src/main/resources/application-dev.yml
# 配置数据库连接信息和 Redis 连接信息

# 启动项目
mvn spring-boot:run
```

后端服务默认运行在 `http://localhost:8080`

#### 3. 前端启动

```bash
# 进入前端目录
cd frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

前端服务默认运行在 `http://localhost:3000`

### 默认账号

- **超级管理员**
  - 用户名：`admin`
  - 密码：`admin123`

- **测试用户**
  - 用户名：`test`
  - 密码：`admin123`

---

## 功能模块

### 1. 登录认证

#### 1.1 用户登录

1. 访问系统首页，自动跳转到登录页面
2. 输入用户名和密码
3. 输入图形验证码
4. 点击"登录"按钮

**功能说明：**
- 支持图形验证码验证
- 登录失败次数限制（默认5次）
- 超过限制次数后账号锁定30分钟
- 登录成功后自动跳转到首页

#### 1.2 退出登录

点击右上角用户头像，选择"退出登录"即可安全退出系统。

---

### 2. 首页

首页展示系统的核心统计信息：

- **统计卡片**：用户总数、角色总数、权限总数、部门总数
- **最近登录**：显示最近的登录记录
- **系统通知**：显示最新的系统通知公告

---

### 3. 用户管理

路径：`系统管理 > 用户管理`

#### 3.1 查询用户

**搜索条件：**
- 用户名
- 昵称
- 手机号
- 状态（启用/禁用）
- 部门

点击"查询"按钮进行搜索，点击"重置"按钮清空搜索条件。

#### 3.2 新增用户

1. 点击"新增"按钮
2. 填写用户信息：
   - 用户名（必填，2-20字符，唯一）
   - 密码（必填，6-20字符）
   - 昵称（必填，2-20字符）
   - 邮箱（选填，需符合邮箱格式）
   - 手机号（选填，需符合手机号格式）
   - 性别（选填）
   - 部门（必填）
   - 状态（启用/禁用）
   - 备注（选填）
3. 点击"确定"按钮保存

#### 3.3 编辑用户

1. 点击用户列表中的"编辑"按钮
2. 修改用户信息（用户名不可修改）
3. 点击"确定"按钮保存

#### 3.4 删除用户

- **单个删除**：点击用户列表中的"删除"按钮
- **批量删除**：勾选多个用户，点击"批量删除"按钮

**注意：** 超级管理员（admin）不能被删除

#### 3.5 重置密码

1. 点击用户列表中的"重置密码"按钮
2. 输入新密码和确认密码
3. 点击"确定"按钮保存

#### 3.6 分配角色

1. 点击用户列表中的"分配角色"按钮
2. 勾选需要分配的角色
3. 点击"确定"按钮保存

#### 3.7 切换状态

点击用户列表中的状态开关，可以快速启用或禁用用户。

**注意：*管理员（admin）不能被禁用

---

### 4. 角色管理

路径：`系统管理 > 角色管理`

#### 4.1 查询角色

**搜索条件：**
- 角色名称
- 角色编码
- 状态（启用/禁用）

#### 4.2 新增角色

1. 点击"新增"按钮
2. 填写角色信息：
   - 角色名称（必填，2-20字符）
   - 角色编码（必填，2-20字符，大写字母和下划线，唯一）
   - 数据权限范围：
     - 全部数据：可以查看所有数据
     - 本部门及以下：可以查看本部门及下级部门的数据
     - 本部门：只能查看本部门的数据
     - 仅本人：只能查看自己的数据
     - 自定义：自定义数据权限规则
   - 状态（启用/禁用）
   - 排序（数字越小越靠前）
   - 备注（选填）
3. 点击"确定"按钮保存

#### 4.3 编辑角色

1. 点击角色列表中的"编辑"按钮
2. 修改角色信息（角色编码不可修改）
3. 点击"确定"按钮保存

#### 4.4 删除角色

- **单个删除**：点击角色列表中的"删除"按钮
- **批量删除**：勾选多个角色，点击"批量删除"按钮

**注意：** 如果角色已分配给用户，则不能删除

#### 4.5 分配权限

1. 点击角色列表中的"分配权限"按钮
2. 在权限树中勾选需要分配的权限
3. 支持父子节点联动
4. 点击"确定"按钮保存

#### 4.6 切换状态

点击角色列表中的状态开关，可以快速启用或禁用角色。

---

### 5. 权限管理

路径：`系统管理 > 权限管理`

#### 5.1 查询权限

**搜索条件：**
- 权限名称
- 权限编码
- 权限类型（菜单/按钮）
- 状态（启用/禁用）

#### 5.2 新增权限

1. 点击"新增"按钮或权限列表中的"新增"按钮（新增子权限）
2. 填写权限信息：
   - 上级权限（选填，选择父级权限）
   - 权限类型：
     - 菜单：前端路由菜单
     - 按钮：后端接口权限
   - 权限名称（必填，2-20字符）
   - 权限编码（必填，2-50字符，唯一）
   - 路由路径（菜单类型必填）
   - 组件路径（菜单类型必填）
   - 图标（菜单类型选填）
   - 是否可见（菜单类型必填）
   - 状态（启用/禁用）
   - 排序（数字越小越靠前）
   - 备注（选填）
3. 点击"确定"按钮保存

#### 5.3 编辑权限

1. 点击权限列表中的"编辑"按钮
2. 修改权限信息
3. 点击"确定"按钮保存

#### 5.4 删除权限

点击权限列表中的"删除"按钮。

**注意：**
- 如果权限有子权限，则不能删除
- 如果权限已分配给角色，则不能删除

#### 5.5 展开/折叠

- 点击"展开全部"按钮：展开所有权限树节点
- 点击"折叠全部"按钮：折叠所有权限树节点

---

### 6. 部门管理

路径：`系统管理 > 部门管理`

#### 6.1 查询部门

**搜索条件：**
- 部门名称
- 部门编码
- 状态（启用/禁用）

#### 6.2 新增部门

1. 点击"新增"按钮或部门列表中的"新增"按钮（新增子部门）
2. 填写部门信息：
   - 上级部门（选填，选择父级部门）
   - 部门名称（必填，2-20字符）
   - 部门编码（必填，2-20字符，唯一）
   - 负责人（选填）
   - 联系电话（选填，需符合手机号格式）
   - 邮箱（选填，需符合邮箱格式）
   - 状态（启用/禁用）
   - 排序（数字越小越靠前）
   - 备注（选填）
3. 点击"确定"按钮保存

#### 6.3 编辑部门

1. 点击部门列表中的"编辑"按钮
2. 修改部门信息
3. 点击"确定"按钮保存

**注意：** 不能将部门设置为自己的上级部门或后代部门

#### 6.4 删除部门

点击部门列表中的"删除"按钮。

**注意：**
- 如果部门有子部门，则不能删除
- 如果部门有用户，则不能删除

---

### 7. 枚举管理

路径：`系统管理 > 枚举管理`

#### 7.1 查询枚举

**搜索条件：**
- 枚举类型
- 枚举标签
- 状态（启用/禁用）

#### 7.2 新增枚举

1. 点击"新增"按钮
2. 填写枚举信息：
   - 枚举类型（必填，2-50字符）
   - 枚举值（必填，1-50字符）
   - 枚举标签（必填，1-50字符）
   - 状态（启用/禁用）
   - 排序（数字越小越靠前）
   - 备注（选填）
3. 点击"确定"按钮保存

**注意：** 同一枚举类型下的枚举值必须唯一

#### 7.3 编辑枚举

1. 点击枚举列表中的"编辑"按钮
2. 修改枚举信息
3. 点击"确定"按钮保存

#### 7.4 删除枚举

- **单个删除**：点击枚举列表中的"删除"按钮
- **批量删除**：勾选多个枚举，点击"批量删除"按钮

#### 7.5 刷新缓存

点击"刷新缓存"按钮，清空所有枚举缓存，下次访问时重新加载。

---

### 8. 全局变量管理

路径：`系统管理 > 全局变量管理`

#### 8.1 查询全局变量

**搜索条件：**
- 配置键
- 配置名称
- 配置类型（系统内置/用户自定义）
- 状态（启用/禁用）

#### 8.2 新增全局变量

1. 点击"新增"按钮
2. 填写配置信息：
   - 配置键（必填，2-50字符，唯一）
   - 配置值（必填，最多500字符）
   - 配置名称（必填，2-50字符）
   - 配置类型：
     - 系统内置：系统预设的配置，不可删除
     - 用户自定义：用户自定义的配置，可以删除
   - 状态（启用/禁用）
   - 备注（选填）
3. 点击"确定"按钮保存

#### 8.3 编辑全局变量

1. 点击配置列表中的"编辑"按钮
2. 修改配置信息
3. 点击"确定"按钮保存

#### 8.4 删除全局变量

- **单个删除**：点击配置列表中的"删除"按钮
- **批量删除**：勾选多个配置，点击"批量删除"按钮

**注意：** 系统内置配置不能删除

#### 8.5 刷新缓存

点击"刷新缓存"按钮，清空所有配置缓存，下次访问时重新加载。

---

### 9. 日志管理

#### 9.1 操作日志

路径：`系统管理 > 日志管理 > 操作日志`

**功能说明：**
- 记录用户的所有操作行为
- 包含操作模块、操作类型、请求方法、请求参数、返回结果、IP地址、执行时长等信息

**搜索条件：**
- 操作模块
- 操作类型（新增/修改/删除/查询/其他）
- 操作人
- 状态（成功/失败）
- 操作时间范围

**操作功能：**
- 查看详情：查看完整的日志信息
- 删除：删除单条日志
- 批量删除：删除多条日志
- 清空日志：清空所有日志（需二次确认）

#### 9.2 登录日志

路径：`系统管理 > 日志管理 > 登录日志`

**功能说明：**
- 记录用户的登录信息
- 包含用户名、登录IP、登录地点、浏览器、操作系统、登录状态等信息

**搜索条件：**
- 用户名
- 登录IP
- 状态（成功/失败）
- 登录时间范围

**操作功能：**
- 查看详情：查看完整的登录日志信息
- 删除：删除单条日志
- 批量删除：删除多条日志
- 清空日志：清空所有日志（需二次确认）

---

### 10. 通知公告

#### 10.1 通知管理

路径：`系统管理 > 通知公告 > 通知管理`

**功能说明：**
- 管理系统通知公告
- 支持草稿和发布状态
- 支持通知类型和级别分类

**搜索条件：**
- 通知标题
- 通知类型（通知/公告）
- 通知级别（普通/重要/紧急）
- 状态（草稿/已发布）

**操作功能：**
- 新增通知：创建新的通知公告
- 编辑：修改通知信息
- 发布：将草稿状态的通知发布（仅草稿状态显示）
- 删除：删除通知
- 批量删除：删除多条通知
- 查看详情：查看完整的通知内容

#### 10.2 我的通知

路径：`系统管理 > 通知公告 > 我的通知`

**功能说明：**
- 查看所有已发布的通知公告
- 未读通知高亮显示
- 点击查看自动标记为已读

**搜索条件：**
- 标题
- 类型（通知/公告）
- 级别（普通/重要/紧急）

**未读通知提醒：**
- 顶部栏显示未读通知数量徽章
- 点击铃铛图标查看最新通知列表
- 每30秒自动刷新未读数量

---

### 11. 系统监控

#### 11.1 服务器监控

路径：`系统监控 > 服务器监控`

**功能说明：**
- 实时监控服务器运行状态
- 每10秒自动刷新数据

**监控内容：**
- **CPU信息**：CPU型号、核心数、使用率
- **内存信息**：总内存、已用内存、可用内存、使用率
- **JVM信息*、启动时间、运行时长、内存使用情况
- **系统信息**：操作系统、系统架构、主机名、IP地址
- **磁盘信息**：磁盘名称、挂载路径、空间使用情况

#### 11.2 缓存监控

路径：`系统监控 > 缓存监控`

**功能说明：**
- 实时监控Redis缓存状态
- 管理缓存键值
- 每10秒自动刷新数据

**监控内容：**
- **Redis信息**：Redis版本、运行模式、端口、客户端连接数
- **内存信息**：已用内存、最大内存、内存使用率
- **性能信息**：键总数、命中率、运行时长

**缓存管理：**
- 搜索缓存键：支持模式匹配（*通配符）
- 查看缓存值：查看缓存键的值和过期时间
- 删除缓存键：删除指定的缓存键
- 清空缓存：清空所有缓存（需二次确认）

---

### 12. 个人中心

路径：点击右上角用户头像，选择"个人中心"

#### 12.1 基本信息

**功能说明：**
- 查看和修改个人基本信息
- 上传个人头像

**可编辑字段：**
- 头像（点击头像上传，支持jpg/jpeg/png格式，最大2MB）
- 昵称（2-20字符）
- 邮箱（需符合邮箱格式）
- 手机号（需符合手机号格式）
- 性别（男/女/未知）

**操作按钮：**
- 保存：保存修改后的信息
- 重置：恢复到修改前的状态

#### 12.2 修改密码

**功能说明：**
- 修改登录密码
- 修改成功后自动跳转到登录页

**输入字段：**
- 旧密码（必填）
- 新密码（必填，6-20字符）
- 确认密码（必填，需与新密码一致）

**操作按钮：**
- 修改：提交密码修改
- 重置：清空输入框

---

## 常见问题

### 1. 登录相关

**Q: 忘记密码怎么办？**

A: 请联系系统管理员重置密码。管理员可以在"用户管理"模块中为用户重置密码。

**Q: 登录时提示"账号已被锁定"？**

A: 登录失败次数超过限制（默认5次），账号会被锁定30分钟。请等待锁定时间结束后再次尝试登录，或联系管理员解锁。

**Q: 验证码看不清怎么办？**

A: 点击验证码图片可以刷新验证码。

### 2. 权限相关

**Q: 为什么看不到某些菜单？**

A: 菜单的显示取决于用户的角色权限。如果看不到某些菜单，说明当前用户没有相应的权限。请联系管理员分配权限。

**Q: 如何给用户分配权限？**

A: 权限是通过角色分配的。步骤如下：
1. 在"角色管理"中创建角色并分配权限
2. 在"用户管理"中为用户分配角色

**Q: 数据权限是什么？**

A: 数据权限控制用户可以查看哪些数据。例如：
- 全部数据：可以查看所有数据
- 本部门及以下：只能查看本部门及下级部门的数据
- 本部门：只能查看本部门的数据
- 仅本人：只能查看自己创建的数据

### 3. 操作相关

**Q: 为什么无法删除某个角色/部门/权限？**

A: 可能的原因：
- 角色：该角色已分配给用户
- 部门：该部门有子部门或有用户
- 权限：该权限有子权限或已分配给角色

需要先解除关联关系才能删除。

**Q: 如何批量操作？**

A: 在列表页面勾选多个记录，然后点击"批量删除"等批量操作按钮。

**Q: 如何导出数据？**

A: 当前版本暂不支持数据导出功能，后续版本会添加。

### 4. 性能相关

**Q: 系统响应慢怎么办？**

A: 可能的原因和解决方案：
1. 检查服务器资源使用情况（在"服务器监控"中查看）
2. 检查Redis缓存是否正常（在"缓存监控"中查看）
3. 清理过期的日志数据
4. 联系系统管理员优化系统配置

**Q: 如何清理日志？**

A: 在"日志管理"模块中，可以：
- 删除单条或批量删除日志
- 清空所有日志（需二次确认）

建议定期清理过期的日志数据，以保持系统性能。

### 5. 其他问题

**Q: 如何修改个人信息？**

A: 点击右上角用户头像，选择"个人中心"，在"基本信息"标签页中修改。

**Q: 如何查看系统通知？**

A:
1. 点击顶部栏的铃铛图标查看最新通知
2. 访问"我的通知"页面查看所有通知

**Q: 如何联系技术支持？**

A: 如遇到技术问题，请联系系统管理员或技术支持团队。

---

## 附录

### 系统配置说明

**JWT配置：**
- Token有效期：默认24小时
- 刷新Token有效期：默认7天

**验证码配置：**
- 验证码有效期：默认5分钟
- 验证码长度：4位

**登录配置：**
- 最大重试次数：默认5次
- 锁定时间：默认30分钟

**文件上传配置：**
- 头像最大大小：2MB
- 支持的图片格式：jpg、jpeg、png

### 浏览器兼容性

推荐使用以下浏览器访问系统：
- Chrome 90+
- Firefox 88+
- Edge 90+
- Safari 14+

### 更新日志

**v1.0.0 (26-01-15)**
- 初始版本发布
- 完成基础功能模块开发
- 完成权限管理体系
- 完成数据权限控制
- 完成日志管理功能
- 完成系统监控功能

---

**文档版本：** v1.0.0
**最后更新：** 2026-01-15
**维护团队：** Base System Team
