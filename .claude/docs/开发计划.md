# 企业级系统基座 - 开发计划文档

## 项目概述

| 项目 | 说明 |
|------|------|
| **项目名称** | 企业级系统基座 |
| **后端技术** | Java 1.8 + Spring Boot 2.7.x + MyBatis Plus + Spring Security |
| **前端技术** | Vue 3 + Element Plus + Vite + Pinia |
| **数据库** | MySQL 8.0 + Redis |
| **认证方案** | JWT + RBAC 权限模型 |

---

## 第一阶段：项目基础架构搭建 ✅

### 1. 后端项目初始化 ✅
- [x] 创建 Spring Boot 项目结构
- [x] 配置 Maven 依赖（Spring Boot 2.7.x、MyBatis Plus、Spring Security、JWT、Redis、Knife4j等）
- [x] 配置多环境配置文件（dev、test、prod）
- [x] 搭建统一响应结构（Result<T>）
- [x] 实现全局异常处理器
- [x] 配置跨域、日志、Swagger文档

### 2. 数据库设计与初始化 ✅
- [x] 设计并创建用户表（sys_user）
- [x] 设计并创建角色表（sys_role）
- [x] 设计并创建权限/菜单表（sys_permission）
- [x] 设计并创建部门表（sys_dept）
- [x] 设计并创建枚举表（sys_enum）
- [x] 设计并创建全局变量表（sys_config）
- [x] 设计并创建日志表（sys_log_operation、sys_log_login）
- [x] 设计并创建通知表（sys_notice）
- [x] 创建关联表（sys_user_role、sys_role_permission）
- [x] 初始化基础数据

### 3. 前端项目初始化 ✅
- [x] 创建 Vue 3 + Vite 项目
- [x] 配置 Element Plus 组件库
- [x] 配置 Vue Router 路由
- [x] 配置 Pinia 状态管理
- [x] 封装 Axios 请求工具
- [x] 搭建基础布局框架（侧边栏、顶部栏、内容区）

---

## 第二阶段：认证与权限核心 ✅

### 4. 登录认证模块 ✅
- [x] 实现 JWT Token 生成与验证工具类
- [x] 实现图形验证码生成接口
- [x] 实现登录接口（账号密码 + 验证码校验）
- [x] 实现 Token 刷新接口
- [x] 实现登出接口
- [x] 实现登录失败次数限制（Redis计数）
- [x] 实现登录日志记录
- [x] 前端登录页面开发

### 5. Spring Security 集成 ✅
- [x] 配置 Security 过滤链
- [x] 实现 JWT 认证过滤器
- [x] 实现自定义 UserDetailsService
- [x] 实现权限注解支持（@PreAuthorize）
- [x] 实现动态权限加载
- [x] 配置白名单路径

---

## 第三阶段：基础管理模块 ✅

### 6. 用户管理模块 ✅
- [x] 后端：用户分页查询接口
- [x] 后端：用户新增接口
- [x] 后端：用户编辑接口
- [x] 后端：用户删除接口（逻辑删除）
- [x] 后端：用户状态切换接口
- [x] 后端：重置密码接口
- [x] 后端：分配角色接口
- [x] 前端：用户列表页面
- [x] 前端：用户新增/编辑弹窗
- [x] 前端：角色分配弹窗

### 7. 角色管理模块 ✅
- [x] 后端：角色分页查询接口
- [x] 后端：角色新增接口
- [x] 后端：角色编辑接口
- [x] 后端：角色删除接口
- [x] 后端：分配权限接口
- [x] 后端：数据权限配置接口
- [x] 前端：角色列表页面
- [x] 前端：角色新增/编辑弹窗
- [x] 前端：权限分配树弹窗

### 8. 权限/菜单管理模块 ✅
- [x] 后端：权限树形查询接口
- [x] 后端：权限新增接口
- [x] 后端：权限编辑接口
- [x] 后端：权限删除接口
- [x] 后端：获取当前用户菜单接口
- [x] 前端：菜单树管理页面
- [x] 前端：菜单新增/编辑弹窗
- [x] 前端：实现动态路由生成

### 9. 部门管理模块 ✅
- [x] 后端：部门树形查询接口
- [x] 后端：部门新增接口
- [x] 后端：部门编辑接口
- [x] 后端：部门删除接口
- [x] 前端：部门树管理页面
- [x] 前端：部门新增/编辑弹窗

---

## 第四阶段：辅助功能模块 🔄

### 10. 枚举管理模块 ✅
- [x] 后端：枚举分页查询接口
- [x] 后端：枚举新增接口
- [x] 后端：枚举编辑接口
- [x] 后端：枚举删除接口
- [x] 后端：按类型查询枚举接口
- [x] 后端：枚举 Redis 缓存机制
- [x] 前端：枚举管理页面

### 11. 全局变量管理模块 ✅
- [x] 后端：参数分页查询接口
- [x] 后端：参数新增接口
- [x] 后端：参数编辑接口
- [x] 后端：参数删除接口
- [x] 后端：按 Key 查询参数接口
- [x] 后端：刷新缓存接口
- [x] 前端：参数配置页面

### 12. 日志管理模块 ✅
- [x] 后端：实现操作日志 AOP 切面
- [x] 后端：操作日志查询接口
- [x] 后端：登录日志查询接口
- [x] 后端：日志清理接口
- [x] 前端：操作日志查询页面
- [x] 前端：登录日志查询页面

### 13. 通知公告模块 🔄
- [x] 后端：通知分页查询接口
- [x] 后端：通知新增接口
- [x] 后端：通知编辑接口
- [x] 后端：通知删除接口
- [x] 后端：通知发布接口
- [ ] 后端：标记已读接口
- [ ] 后端：获取未读数量接口
- [x] 前端：通知管理页面
- [ ] 前端：通知详情页面
- [ ] 前端：未读通知提醒组件

---

## 第五阶段：完善与优化 🔄

### 14. 个人中心 ✅
- [x] 后端：获取个人信息接口
- [x] 后端：修改个人信息接口
- [x] 后端：修改密码接口
- [x] 后端：头像上传接口
- [x] 前端：个人中心页面

### 15. 数据权限实现 ⏳
- [ ] 实现数据权限 MyBatis 拦截器
- [ ] 按部门过滤数据逻辑
- [ ] 数据权限注解支持

### 16. 系统优化 ⏳
- [ ] 接口性能优化
- [ ] Redis 缓存策略优化
- [ ] 前端性能优化（懒加载、缓存）
- [ ] 安全加固（XSS、SQL注入防护）

### 17. 测试与文档 ⏳
- [ ] 单元测试编写
- [ ] 接口测试
- [ ] 部署文档编写
- [ ] 使用手册编写

---

## 任务统计

| 阶段 | 模块数 | 总任务数 | 已完成 | 未完成 | 完成率 |
|------|--------|----------|--------|--------|--------|
| 第一阶段 ✅ | 3 | 22 | 22 | 0 | 100% |
| 第二阶段 ✅ | 2 | 14 | 14 | 0 | 100% |
| 第三阶段 ✅ | 4 | 28 | 28 | 0 | 100% |
| 第四阶段 🔄 | 4 | 27 | 22 | 5 | 81% |
| 第五阶段 🔄 | 4 | 16 | 5 | 11 | 31% |
| **合计** | **17** | **107** | **91** | **16** | **85%** |

### 进度说明

**已完成模块（91项）：**
- ✅ 后端项目初始化（6项）
- ✅ 数据库设计与初始化（10项）
- ✅ 前端项目初始化（6项）
- ✅ 登录认证模块（8项）
- ✅ Spring Security 集成（6项）
- ✅ 用户管理模块（10项）
- ✅ 角色管理模块（9项）
- ✅ 权限/菜单管理模块（8项）
- ✅ 部门管理模块（6项）
- ✅ 枚举管理模块（7项）
- ✅ 全局变量管理模块（7项）
- ✅ 日志管理模块（6项）
- ✅ 个人中心（5项）

**进行中模块（5项）：**
- 🔄 通知公告模块（已完成5项，剩余3项）
  - [ ] 后端：标记已读接口
  - [ ] 后端：获取未读数量接口
  - [ ] 前端：通知详情页面
  - [ ] 前端：未读通知提醒组件

**待开发模块（11项）：**
- ⏳ 数据权限实现（3项）
- ⏳ 系统优化（4项）
- ⏳ 测试与文档（4项）

---

## 开发顺序建议

1. **先搭建后端基础架构** - 项目结构、依赖配置、统一响应、异常处理
2. **完成数据库设计** - 所有表结构和初始化数据
3. **实现登录认证** - JWT、Security 配置，这是后续所有功能的基础
4. **前端项目初始化** - 与后端认证对接
5. **按模块逐个开发** - 用户 → 角色 → 权限/菜单 → 部门 → 其他辅助模块
6. **最后完善优化** - 个人中心、数据权限、性能优化、测试

---

## 关键技术点

| 技术点 | 说明 |
|--------|------|
| **认证** | JWT + Spring Security + Redis 存储 Token |
| **权限** | RBAC 模型，支持菜单权限和按钮权限 |
| **数据权限** | MyBatis 拦截器实现部门级数据隔离 |
| **缓存** | Redis 缓存枚举、配置参数、用户权限等 |
| **日志** | AOP 切面实现操作日志自动记录 |
| **API文档** | Knife4j (Swagger增强版) 自动生成 |
